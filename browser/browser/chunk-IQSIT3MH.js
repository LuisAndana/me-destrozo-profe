import{P as m,T as g,k as h,l as f,lc as u,mc as a,o as l,oc as b}from"./chunk-VJI5GMUY.js";import{a as d,b as p}from"./chunk-FDERIQAA.js";var c=window.env?.apiUrl||"http://localhost:8000",i=`${c}/usuarios`,_=`${c}/entrenadores`,$=`${c}/cliente-entrenador`,v=class o{constructor(r){this.http=r}authHeaders(){let r=localStorage.getItem("token")??"";return r?new u({Authorization:`Bearer ${r}`}):new u}getEntrenadores(r){let e=new a;return Object.entries(r).forEach(([t,s])=>{s!=null&&s!==""&&(e=e.set(t,String(s)))}),this.http.get(_,{params:e,headers:this.authHeaders()})}getEntrenadorDetalle(r){return this.http.get(`${_}/${r}`,{headers:this.authHeaders()}).pipe(l(e=>p(d({},e),{precio_mensual:e.precio_mensual??400})))}getPerfil(r){let e=`${i}/entrenador/perfil`,t=new a;return r&&(t=t.set("user_id",String(r)),console.log(`\u{1F4E1} GET ${e}?user_id=${r}`)),this.http.get(e,{params:t,headers:this.authHeaders()})}updatePerfil(r,e){let t=`${i}/entrenador/perfil`,s=new a;return e&&(s=s.set("user_id",String(e)),console.log(`\u{1F4E1} PUT ${t}?user_id=${e}`)),this.http.put(t,r,{params:s,headers:this.authHeaders()})}uploadAvatar(r,e){let t=new FormData;t.append("avatar",r);let s=`${i}/perfil/avatar`,n=new a;return e&&(n=n.set("user_id",String(e)),console.log(`\u{1F4E1} POST ${s}?user_id=${e}`)),this.http.post(s,t,{params:n,headers:this.authHeaders()})}deleteAvatar(r){let e=`${i}/perfil/avatar`,t=new a;return r&&(t=t.set("user_id",String(r)),console.log(`\u{1F4E1} DELETE ${e}?user_id=${r}`)),this.http.delete(e,{params:t,headers:this.authHeaders()})}uploadEvidence(r,e){let t=new FormData;t.append("file",r);let s=`${i}/entrenador/evidencia`,n=new a;return e&&(n=n.set("user_id",String(e)),console.log(`\u{1F4E1} POST ${s}?user_id=${e}`)),this.http.post(s,t,{params:n,headers:this.authHeaders()})}getMisClientes(r){let e=r??Number(localStorage.getItem("id_entrenador")||0);if(!e)return console.error("\u274C getMisClientes: id_entrenador requerido y no est\xE1 definido"),f(()=>new Error("id_entrenador requerido"));let t=`${$}/mis-clientes/${e}`;return console.log("\u{1F4E1} GET Mis Clientes URL:",t),this.http.get(t,{headers:this.authHeaders()})}verificarIntegridad(){let r=localStorage.getItem("id_entrenador")||"0",e=parseInt(r,10)||0;return e?this.getPerfil(e).pipe(l(t=>({success:!0,has_json:!!t&&Object.keys(t).length>0,needs_sync:!1,synced:!0}))):h({success:!1,has_json:!1,needs_sync:!1,synced:!1})}static \u0275fac=function(e){return new(e||o)(g(b))};static \u0275prov=m({token:o,factory:o.\u0275fac,providedIn:"root"})};export{v as a};
