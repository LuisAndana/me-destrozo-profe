import{a as re}from"./chunk-IQSIT3MH.js";import{a as te}from"./chunk-753XICM7.js";import{a as ee}from"./chunk-V7WHDDYD.js";import{b as W,d as X,e as J,f as H,g as K,h as Q,y as Z}from"./chunk-T5YDL63U.js";import{c as Y,e as q,f as $,j as B}from"./chunk-XCTHI3QZ.js";import{$ as T,K as E,La as j,Pa as b,U as P,Wa as d,Xa as n,Ya as o,Z as w,Za as p,_ as S,aa as F,ac as L,db as k,eb as x,f as N,gb as g,gc as V,k as O,nb as f,pb as s,qb as u,rb as v,tb as U,ub as R,vb as D,wa as c,x as M,zb as G}from"./chunk-VJI5GMUY.js";import{e as h}from"./chunk-FDERIQAA.js";var ae="clover",ge=function(t){return t===3?"v3":t},ie="https://js.stripe.com",pe="".concat(ie,"/").concat(ae,"/stripe.js"),me=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,ue=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,ne="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",fe=function(t){return me.test(t)||ue.test(t)},ve=function(){for(var t=document.querySelectorAll('script[src^="'.concat(ie,'"]')),e=0;e<t.length;e++){var r=t[e];if(fe(r.src))return r}return null},oe=function(t){var e=t&&!t.advancedFraudSignals?"?advancedFraudSignals=false":"",r=document.createElement("script");r.src="".concat(pe).concat(e);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(r),r},he=function(t,e){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"8.5.1",startTime:e})},_=null,I=null,z=null,Pe=function(t){return function(e){t(new Error("Failed to load Stripe.js",{cause:e}))}},be=function(t,e){return function(){window.Stripe?t(window.Stripe):e(new Error("Stripe.js not available"))}},xe=function(t){return _!==null?_:(_=new Promise(function(e,r){if(typeof window>"u"||typeof document>"u"){e(null);return}if(window.Stripe&&t&&console.warn(ne),window.Stripe){e(window.Stripe);return}try{var i=ve();if(i&&t)console.warn(ne);else if(!i)i=oe(t);else if(i&&z!==null&&I!==null){var l;i.removeEventListener("load",z),i.removeEventListener("error",I),(l=i.parentNode)===null||l===void 0||l.removeChild(i),i=oe(t)}z=be(e,r),I=Pe(r),i.addEventListener("load",z),i.addEventListener("error",I)}catch(m){r(m);return}}),_.catch(function(e){return _=null,Promise.reject(e)}))},_e=function(t,e,r){if(t===null)return null;var i=e[0],l=i.match(/^pk_test/),m=ge(t.version),y=ae;l&&m!==y&&console.warn("Stripe.js@".concat(m," was loaded on the page, but @stripe/stripe-js@").concat("8.5.1"," expected Stripe.js@").concat(y,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var A=t.apply(void 0,e);return he(A,r),A},C,se=!1,ce=function(){return C||(C=xe(null).catch(function(t){return C=null,Promise.reject(t)}),C)};Promise.resolve().then(function(){return ce()}).catch(function(a){se||console.warn(a)});var le=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];se=!0;var i=Date.now();return ce().then(function(l){return _e(l,e,i)})};var Ce=a=>({id:a});function ye(a,t){a&1&&(n(0,"div",16),p(1,"div",17),n(2,"p"),s(3,"Cargando datos del entrenador..."),o()())}function Oe(a,t){if(a&1){let e=k();n(0,"div",18)(1,"div",19),s(2,"\u274C"),o(),n(3,"h2"),s(4,"Error"),o(),n(5,"p"),s(6),o(),n(7,"button",20),x("click",function(){w(e);let i=g();return S(i.cancelarPago())}),s(8,"Volver"),o()()}if(a&2){let e=g();c(6),u(e.errorEntrenador)}}function Me(a,t){if(a&1&&(n(0,"div",40),s(1),o()),a&2){let e=g(2);c(),v("\u26A0\uFE0F ",e.errorFormulario)}}function Ee(a,t){if(a&1&&(n(0,"div",41)(1,"h2"),s(2,"Confirma tu pago"),o(),n(3,"p"),s(4,"Tarjeta terminada en: "),n(5,"strong"),s(6),o()(),n(7,"p"),s(8,"Titular: "),n(9,"strong"),s(10),o()(),n(11,"p"),s(12,"Monto a pagar: "),n(13,"strong"),s(14),o()()()),a&2){let e=g(2);c(6),u(e.ultimosDigitos),c(4),u(e.formPago.titular),c(4),v("$",e.precioFormateado," MXN")}}function we(a,t){a&1&&(n(0,"div"),p(1,"div",17),n(2,"h2"),s(3,"Procesando pago\u2026"),o(),n(4,"p"),s(5,"Por favor espera..."),o()())}function Se(a,t){if(a&1&&(n(0,"div",44)(1,"h2"),s(2,"\xA1Pago exitoso!"),o(),n(3,"p"),s(4),o()()),a&2){let e=g(3);c(4),v("Transacci\xF3n: ",e.idTransaccion)}}function ke(a,t){if(a&1){let e=k();n(0,"div")(1,"h2"),s(2,"Error"),o(),n(3,"p"),s(4),o(),n(5,"button",45),x("click",function(){w(e);let i=g(3);return S(i.volver())}),s(6,"Reintentar"),o()()}if(a&2){let e=g(3);c(4),u(e.errorContratacion)}}function Ie(a,t){if(a&1&&(n(0,"div",41),b(1,we,6,0,"div",42)(2,Se,5,1,"div",43)(3,ke,7,1,"div",42),o()),a&2){let e=g(2);c(),d("ngIf",!e.pagoProcesado),c(),d("ngIf",e.pagoProcesado&&!e.errorContratacion),c(),d("ngIf",e.errorContratacion)}}function ze(a,t){if(a&1){let e=k();n(0,"div",21)(1,"div",22)(2,"div",23)(3,"div",24),s(4,"1"),o(),n(5,"div",25),s(6,"Datos"),o()(),p(7,"div",26),n(8,"div",23)(9,"div",24),s(10,"2"),o(),n(11,"div",25),s(12,"Confirmaci\xF3n"),o()(),p(13,"div",26),n(14,"div",23)(15,"div",24),s(16,"3"),o(),n(17,"div",25),s(18,"Pago"),o()()(),n(19,"div",27)(20,"h2"),s(21,"Ingresa los datos de tu tarjeta"),o(),n(22,"form",28)(23,"div",29)(24,"label"),s(25,"Nombre del Titular"),o(),n(26,"div",30),T(),n(27,"svg",31),p(28,"path",32)(29,"circle",33),o(),F(),n(30,"input",34),D("ngModelChange",function(i){w(e);let l=g();return R(l.formPago.titular,i)||(l.formPago.titular=i),S(i)}),o()()(),n(31,"div",29)(32,"label"),s(33,"Tarjeta de Cr\xE9dito / D\xE9bito"),o(),p(34,"div",35),o(),n(35,"div",36)(36,"div",37)(37,"span"),s(38,"Entrenador:"),o(),n(39,"strong"),s(40),o()(),n(41,"div",37)(42,"span"),s(43,"Especialidad:"),o(),n(44,"strong"),s(45),o()(),n(46,"div",37)(47,"span"),s(48,"Total (mensual):"),o(),n(49,"strong"),s(50),o()()(),b(51,Me,2,1,"div",38),o()(),b(52,Ee,15,3,"div",39)(53,Ie,4,3,"div",39),o()}if(a&2){let e=g();c(2),f("activo",e.pasoPago>=1)("completado",e.pasoPago>1),c(5),f("activo",e.pasoPago>1),c(),f("activo",e.pasoPago>=2)("completado",e.pasoPago>2),c(5),f("activo",e.pasoPago>2),c(),f("activo",e.pasoPago>=3)("completado",e.pasoPago>3),c(16),U("ngModel",e.formPago.titular),c(10),u(e.entrenador.nombre),c(5),u(e.entrenador.especialidad),c(5),v("$",e.precioFormateado," MXN"),c(),d("ngIf",e.errorFormulario),c(),d("ngIf",e.pasoPago===2),c(),d("ngIf",e.pasoPago===3)}}var de=class a{route=P(Y);router=P(q);clienteEntrenadorSvc=P(te);entrenadorSvc=P(re);stripe=null;cardElement;elements;destroy$=new N;currentUserId=null;currentUserRol=null;entrenador=null;cargandoEntrenador=!0;errorEntrenador=null;pasoPago=1;formPago={numeroTarjeta:"",titular:"",mesExpiracion:"",anoExpiracion:"",cvv:""};procesandoPago=!1;pagoProcesado=!1;errorFormulario=null;contratandoEntrenador=!1;errorContratacion=null;yaEnviado=!1;ngOnInit(){return h(this,null,function*(){console.log("\u{1F7E6} [PAGO] ProcesoPagoPage inicializado"),this.cargarUsuarioActual()&&(this.cargarEntrenador(),yield this.inicializarStripe())})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}inicializarStripe(){return h(this,null,function*(){if(this.cardElement){try{this.cardElement.unmount()}catch{}this.cardElement=null}if(this.stripe=yield le(ee.endpoints.stripePublicKey),!this.stripe){console.error("\u{1F534} No se pudo inicializar Stripe");return}if(console.log("\u{1F7E2} Stripe inicializado correctamente"),this.elements=this.stripe.elements(),!this.elements){console.error("\u{1F534} No se pudo crear Stripe Elements");return}this.cardElement=this.elements.create("card",{hidePostalCode:!0,style:{base:{color:"#e9edf5",fontSize:"16px",iconColor:"#1ed760","::placeholder":{color:"#94a0ad"}},invalid:{color:"#fca5a5",iconColor:"#ef4444"}}}),setTimeout(()=>{if(!document.getElementById("card-element")){console.error("\u{1F534} No se encontr\xF3 #card-element para montar Stripe");return}this.cardElement.mount("#card-element"),console.log("\u{1F7E2} CardElement montado en DOM global");let e=document.getElementById("stripe-visible"),r=document.getElementById("card-element");e&&r?(e.appendChild(r),console.log("\u{1F7E2} CardElement movido a contenedor visible")):console.warn("\u26A0\uFE0F No se pudo mover el CardElement al contenedor visible")},300)})}cargarUsuarioActual(){try{let t=localStorage.getItem("usuario");if(!t)return console.warn("\u{1F7E8} [PAGO] No hay usuario en localStorage"),this.mostrarErrorYRedirigir("Debes iniciar sesi\xF3n para realizar un pago","/login"),!1;let e=JSON.parse(t);return this.currentUserId=Number(e?.id??e?.id_usuario),this.currentUserRol=e?.rol??e?.userType??null,!Number.isFinite(this.currentUserId)||this.currentUserId<=0?(console.error("\u{1F534} [PAGO] ID de usuario inv\xE1lido:",this.currentUserId),this.mostrarErrorYRedirigir("Datos de usuario inv\xE1lidos","/login"),!1):this.currentUserRol!=="alumno"&&this.currentUserRol!=="cliente"?(console.warn("\u{1F7E8} [PAGO] Usuario no es cliente, rol:",this.currentUserRol),this.mostrarErrorYRedirigir("Solo los clientes pueden realizar pagos","/home"),!1):(console.log("\u{1F7E2} [PAGO] Usuario cargado correctamente:",{id:this.currentUserId,rol:this.currentUserRol}),!0)}catch(t){return console.error("\u{1F534} [PAGO] Error al parsear usuario:",t),this.mostrarErrorYRedirigir("Error de autenticaci\xF3n","/login"),!1}}mostrarErrorYRedirigir(t,e){this.errorEntrenador=t,setTimeout(()=>{this.router.navigate([e])},1500)}cargarEntrenador(){let t=Number(this.route.snapshot.paramMap.get("id"));if(!t||!Number.isFinite(t)){console.error("\u{1F534} [PAGO] ID de entrenador no v\xE1lido:",t),this.errorEntrenador="ID de entrenador inv\xE1lido",this.cargandoEntrenador=!1,setTimeout(()=>this.cancelarPago(),1500);return}console.log("\u{1F7E6} [PAGO] Cargando entrenador:",t),this.entrenadorSvc.getEntrenadorDetalle(t).pipe(E(this.destroy$),M(e=>{console.error("\u{1F534} [PAGO] Error al cargar entrenador:",e);let r=e?.status===404?"El entrenador no existe":e?.error?.message||"Error al cargar los datos del entrenador";return this.errorEntrenador=r,this.cargandoEntrenador=!1,O(null)})).subscribe({next:e=>{if(e){if(!e.id||!e.precio_mensual){this.errorEntrenador="Datos del entrenador incompletos",this.cargandoEntrenador=!1;return}this.entrenador=e,console.log("\u{1F7E2} [PAGO] Entrenador cargado:",this.entrenador.nombre)}else this.errorEntrenador="No se encontraron datos del entrenador";this.cargandoEntrenador=!1}})}validarTarjeta(t){let e=t.replace(/\s/g,"").replace(/[^0-9]/g,"");return e.length!==16?(this.errorFormulario="N\xFAmero de tarjeta debe tener 16 d\xEDgitos",!1):this.validarLuhn(e)?!0:(this.errorFormulario="N\xFAmero de tarjeta inv\xE1lido (validaci\xF3n Luhn)",!1)}validarLuhn(t){let e=0,r=!1;for(let i=t.length-1;i>=0;i--){let l=parseInt(t.charAt(i),10);r&&(l*=2,l>9&&(l-=9)),e+=l,r=!r}return e%10===0}validarFechaExpiracion(t,e){let r=parseInt(t,10),i=parseInt(e,10);if(isNaN(r)||r<1||r>12)return this.errorFormulario="Mes de expiraci\xF3n inv\xE1lido (01-12)",!1;if(isNaN(i)||e.length!==2)return this.errorFormulario="A\xF1o de expiraci\xF3n inv\xE1lido (formato: YY)",!1;let l=new Date,m=l.getFullYear()%100,y=l.getMonth()+1;return i<m||i===m&&r<y?(this.errorFormulario="La tarjeta est\xE1 expirada",!1):i>m+20?(this.errorFormulario="A\xF1o de expiraci\xF3n inv\xE1lido",!1):!0}validarFormulario(){let{titular:t}=this.formPago;return!t||t.trim().length<3?(this.errorFormulario="Nombre del titular inv\xE1lido",!1):(this.errorFormulario=null,!0)}continuarPago(){if(!(this.procesandoPago||this.contratandoEntrenador||this.yaEnviado)){if(console.log("\u{1F7E6} [PAGO] Continuando en paso:",this.pasoPago),this.pasoPago===1){this.validarFormulario()&&(this.pasoPago=2,this.errorFormulario=null);return}this.pasoPago===2&&this.procesarPago()}}volver(){this.pasoPago>1&&!this.procesandoPago&&(this.pasoPago--,console.log("\u{1F7E6} [PAGO] Volviendo al paso:",this.pasoPago))}procesarPago(){return h(this,null,function*(){if(!this.entrenador||!this.entrenador.precio_mensual){this.errorFormulario="Entrenador inv\xE1lido";return}console.log("\u{1F7E6} [PAGO] Creando PaymentIntent en backend..."),this.yaEnviado=!0,this.procesandoPago=!0,this.pasoPago=3,this.clienteEntrenadorSvc.crearPaymentIntent(this.currentUserId,this.entrenador.id,this.entrenador.precio_mensual*100).pipe(E(this.destroy$),M(t=>(console.error("\u{1F534} Error creando PaymentIntent:",t),this.errorFormulario="No se pudo iniciar el pago. Intenta de nuevo.",this.procesandoPago=!1,O(null)))).subscribe(t=>h(this,null,function*(){if(!t||!t.client_secret||!t.id_pago){this.errorFormulario="Error al crear el pago",this.procesandoPago=!1;return}let e=t.id_pago;console.log("\u{1F7E2} PaymentIntent creado - id_pago:",e);let r=yield this.stripe.confirmCardPayment(t.client_secret,{payment_method:{card:this.cardElement,billing_details:{name:this.formPago.titular}}});if(r.error){console.error("\u{1F534} Error Stripe:",r.error.message),this.errorFormulario=r.error.message,this.procesandoPago=!1,this.yaEnviado=!1;return}let i=r.paymentIntent?.status;if(console.log("\u{1F7E2} Estado del pago en Stripe:",i),i==="requires_action"){this.errorFormulario="Tu banco requiere autenticaci\xF3n adicional (3D Secure).",this.procesandoPago=!1,this.yaEnviado=!1;return}if(i==="processing"){this.errorFormulario="El pago est\xE1 procesando. Espera unos segundos\u2026",this.procesandoPago=!1,this.yaEnviado=!1;return}if(i!=="succeeded"){this.errorFormulario="No se pudo confirmar el pago.",this.procesandoPago=!1,this.yaEnviado=!1;return}console.log("\u{1F7E2} Pago confirmado correctamente en Stripe"),this.pasoPago=3,this.pagoProcesado=!0,setTimeout(()=>this.contratarEntrenador(),1500)}))})}contratarEntrenador(){if(!this.entrenador||!this.entrenador.id){this.errorContratacion="Error: Datos del entrenador incompletos",console.error("\u{1F534} [PAGO] Entrenador inv\xE1lido:",this.entrenador);return}if(!this.currentUserId){this.errorContratacion="Error: Usuario no autenticado",console.error("\u{1F534} [PAGO] Usuario no disponible");return}if(this.currentUserId===this.entrenador.id){this.errorContratacion="No puedes contratarte a ti mismo",console.warn("\u{1F7E8} [PAGO] Intento de auto-contrataci\xF3n");return}console.log("\u{1F7E6} [PAGO] Contratando entrenador:",this.entrenador.id),this.contratandoEntrenador=!0,this.clienteEntrenadorSvc.contratarEntrenador(this.entrenador.id).pipe(E(this.destroy$),M(t=>{console.error("\u{1F534} [PAGO] Error al contratar:",t);let e="Error al completar la contrataci\xF3n";return t?.status===409?e="Ya tienes contratado a este entrenador":t?.status===403?e="No tienes permisos para realizar esta acci\xF3n":t?.status===400?e=t?.error?.detail||t?.error?.message||e:t?.status===0&&(e="Error de conexi\xF3n. Verifica tu internet"),this.errorContratacion=e,this.contratandoEntrenador=!1,O(null)})).subscribe({next:t=>{if(!t){this.errorContratacion="Respuesta inv\xE1lida del servidor",this.contratandoEntrenador=!1;return}console.log("\u{1F7E2} [PAGO] Entrenador contratado exitosamente:",t),this.contratandoEntrenador=!1,setTimeout(()=>{this.router.navigate(["/entrenadores",this.entrenador.id])},2e3)}})}formatearTarjeta(t){let e=t.target.value.replace(/\s/g,"").replace(/[^0-9]/g,"");e.length>16&&(e=e.substring(0,16)),this.formPago.numeroTarjeta=e.replace(/(\d{4})(?=\d)/g,"$1 ")}soloNumeros(t){t.target.value=t.target.value.replace(/[^0-9]/g,"")}cancelarPago(){console.log("\u{1F7E6} [PAGO] Cancelando pago"),this.router.navigate(["/entrenadores",this.entrenador?.id||""])}get ultimosDigitos(){return this.formPago.numeroTarjeta.replace(/\s/g,"").slice(-4)}get precioFormateado(){return this.entrenador?.precio_mensual?this.entrenador.precio_mensual.toLocaleString("es-MX",{minimumFractionDigits:2,maximumFractionDigits:2}):"0"}get idTransaccion(){let t=Date.now(),e=Math.floor(Math.random()*1e6);return`#TXN${t}${e}`.substring(0,20)}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=j({type:a,selectors:[["app-proceso-pago-page"]],decls:22,vars:7,consts:[[1,"pago-container"],[1,"pago-header"],[1,"container-header"],["routerLink","/entrenadores",1,"btn-volver",3,"queryParams"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M19 12H5M12 19l-7-7 7-7"],["id","stripe-global",2,"height","0","opacity","0","overflow","hidden","pointer-events","none"],["id","card-element"],["id","card-errors"],[1,"pago-content"],["class","estado-loading",4,"ngIf"],["class","estado-error",4,"ngIf"],["class","pago-main",4,"ngIf"],[1,"pago-footer"],[1,"btn-secundario",3,"click"],[1,"btn-primario",3,"click"],[1,"estado-loading"],[1,"spinner"],[1,"estado-error"],[1,"error-icon"],[1,"btn-volver-error",3,"click"],[1,"pago-main"],[1,"pasos-container"],[1,"paso"],[1,"numero"],[1,"etiqueta"],[1,"linea"],[1,"contenido-pago"],[1,"formulario-pago"],[1,"form-group"],[1,"input-wrapper"],["width","20","height","20","fill","none","stroke","currentColor","stroke-width","2"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],["type","text","placeholder","Juan P\xE9rez","name","titular",3,"ngModelChange","ngModel"],["id","stripe-visible"],[1,"precio-info"],[1,"item"],["class","error-msg",4,"ngIf"],["class","paso-contenido",4,"ngIf"],[1,"error-msg"],[1,"paso-contenido"],[4,"ngIf"],["class","exito-pago",4,"ngIf"],[1,"exito-pago"],[3,"click"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),T(),n(4,"svg",4),p(5,"path",5),o(),s(6," Volver "),o(),F(),n(7,"h1"),s(8,"Proceso de Pago"),o(),p(9,"div"),o()(),n(10,"div",6),p(11,"div",7)(12,"div",8),o(),n(13,"div",9),b(14,ye,4,0,"div",10)(15,Oe,9,1,"div",11)(16,ze,54,23,"div",12),n(17,"div",13)(18,"button",14),x("click",function(){return r.pasoPago===1?r.cancelarPago():r.volver()}),s(19,"Atr\xE1s"),o(),n(20,"button",15),x("click",function(){return r.continuarPago()}),s(21),o()()()()),e&2&&(c(3),d("queryParams",G(5,Ce,r.entrenador==null?null:r.entrenador.id)),c(11),d("ngIf",r.cargandoEntrenador),c(),d("ngIf",r.errorEntrenador&&!r.cargandoEntrenador),c(),d("ngIf",r.entrenador&&!r.cargandoEntrenador&&!r.errorEntrenador),c(5),v(" ",r.pasoPago===1?"Continuar":r.pasoPago===2?"Pagar Ahora":"Procesando..."," "))},dependencies:[V,L,B,$,Z,Q,W,X,J,K,H],styles:['[_ngcontent-%COMP%]:root{--bg-primary: #0f172a;--bg-secondary: #1e293b;--bg-tertiary: #1a2537;--bg-hover: rgba(51, 65, 85, .3);--border-color: #334155;--border-light: #475569;--text-primary: #f1f5f9;--text-secondary: #cbd5e1;--text-tertiary: #94a3b8;--accent-primary: #6366f1;--accent-secondary: #818cf8;--accent-light: rgba(99, 102, 241, .1);--success: #10b981;--success-light: rgba(16, 185, 129, .1);--error: #ef4444;--error-light: rgba(239, 68, 68, .1);--warning: #f59e0b}[_nghost-%COMP%]{display:block;width:100%;min-height:100vh;background:var(--bg-primary);color:var(--text-primary);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif}.pago-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;background:linear-gradient(135deg,var(--bg-primary) 0%,var(--bg-tertiary) 100%)}.pago-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--bg-secondary) 0%,var(--bg-tertiary) 100%);border-bottom:2px solid var(--accent-primary);padding:1.25rem 1rem;position:sticky;top:0;z-index:100;box-shadow:0 4px 20px #6366f126;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.container-header[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 1rem;display:flex;align-items:center;justify-content:space-between;gap:2rem}.pago-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;text-align:center;flex:1;background:linear-gradient(135deg,var(--text-primary) 0%,var(--accent-secondary) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;font-weight:700;letter-spacing:-.5px}.btn-volver[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.75rem 1.25rem;background:#6366f11a;border:1.5px solid var(--accent-primary);border-radius:.75rem;color:var(--accent-secondary);text-decoration:none;font-weight:600;font-size:.95rem;transition:all .3s cubic-bezier(.4,0,.2,1);cursor:pointer;white-space:nowrap}.btn-volver[_ngcontent-%COMP%]:hover{background:#6366f133;color:var(--text-primary);border-color:var(--accent-secondary);transform:translate(-4px);box-shadow:0 4px 12px #6366f140}.btn-volver[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;stroke-width:2.5}.pago-content[_ngcontent-%COMP%]{flex:1;padding:2.5rem 1rem;max-width:900px;margin:0 auto;width:100%}.pago-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2.5rem;background:#1e293bb3;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid var(--border-color);border-radius:1.25rem;padding:3rem;box-shadow:0 20px 40px #0006,inset 0 1px #ffffff0d}.pasos-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1rem;padding:2rem;background:linear-gradient(135deg,var(--accent-light) 0%,transparent 100%);border:1px solid rgba(99,102,241,.2);border-radius:1rem;margin-bottom:1rem}.paso[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.75rem;flex:1;position:relative}.paso[_ngcontent-%COMP%]   .numero[_ngcontent-%COMP%]{width:48px;height:48px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--border-color) 0%,var(--border-light) 100%);border:2px solid var(--border-light);border-radius:50%;color:var(--text-secondary);font-weight:700;font-size:1.1rem;transition:all .35s cubic-bezier(.4,0,.2,1);position:relative;z-index:2;box-shadow:0 2px 8px #0003}.paso.activo[_ngcontent-%COMP%]   .numero[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--accent-primary) 0%,var(--accent-secondary) 100%);border-color:var(--accent-secondary);color:#fff;box-shadow:0 0 0 6px #6366f126,0 4px 12px #6366f159;transform:scale(1.05)}.paso.completado[_ngcontent-%COMP%]   .numero[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--success) 0%,#059669 100%);border-color:var(--success);color:#fff;box-shadow:0 0 0 6px #10b98126,0 4px 12px #10b98140}.paso[_ngcontent-%COMP%]   .numero[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:-8px;border-radius:50%;border:2px solid transparent;transition:all .35s ease}.paso.activo[_ngcontent-%COMP%]   .numero[_ngcontent-%COMP%]:after{border-color:#6366f14d;animation:_ngcontent-%COMP%_pulse-ring 2s infinite}.paso[_ngcontent-%COMP%]   .etiqueta[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-tertiary);text-align:center;font-weight:500;transition:all .3s ease}.paso.activo[_ngcontent-%COMP%]   .etiqueta[_ngcontent-%COMP%]{color:var(--accent-primary);font-weight:700;text-transform:uppercase;letter-spacing:.05em}.paso.completado[_ngcontent-%COMP%]   .etiqueta[_ngcontent-%COMP%]{color:var(--success);font-weight:600}.linea[_ngcontent-%COMP%]{flex:.5;height:3px;background:linear-gradient(90deg,var(--border-color),transparent);transition:all .35s ease;border-radius:2px}.linea.activo[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--accent-primary),var(--accent-secondary));box-shadow:0 0 8px #6366f166}@keyframes _ngcontent-%COMP%_pulse-ring{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.1);opacity:.5}}.contenido-pago[_ngcontent-%COMP%]{min-height:350px;animation:_ngcontent-%COMP%_fadeInUp .6s cubic-bezier(.4,0,.2,1)}.paso-contenido[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .4s cubic-bezier(.4,0,.2,1) forwards}.paso-contenido[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 2rem;font-size:1.75rem;color:var(--text-primary);font-weight:700;letter-spacing:-.5px;background:linear-gradient(135deg,var(--text-primary) 0%,var(--accent-secondary) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.formulario-pago[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.75rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.05em}.input-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;background:linear-gradient(135deg,#3341554d,#3341551a);border:1.5px solid var(--border-light);border-radius:.875rem;overflow:hidden;transition:all .35s cubic-bezier(.4,0,.2,1);padding:0 1rem;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.input-wrapper[_ngcontent-%COMP%]:focus-within{border-color:var(--accent-primary);background:linear-gradient(135deg,#6366f126,#6366f10d);box-shadow:0 0 20px #6366f140,inset 0 1px #ffffff0d;transform:translateY(-2px)}.input-wrapper[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;color:var(--accent-primary);flex-shrink:0;opacity:.8;transition:all .3s ease}.input-wrapper[_ngcontent-%COMP%]:focus-within   svg[_ngcontent-%COMP%]{opacity:1;transform:scale(1.1)}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:1rem .75rem;background:transparent;border:none;color:var(--text-primary);font-size:1rem;outline:none;font-weight:500}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--text-tertiary);font-weight:400}#stripe-visible[_ngcontent-%COMP%]{padding:1.25rem;background:linear-gradient(135deg,#33415533,#3341551a);border:1.5px solid var(--border-light);border-radius:.875rem;transition:all .35s cubic-bezier(.4,0,.2,1);-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);min-height:56px;display:flex;align-items:center}#stripe-visible[_ngcontent-%COMP%]:focus-within{border-color:var(--accent-primary);background:linear-gradient(135deg,#6366f126,#6366f10d);box-shadow:0 0 20px #6366f140,inset 0 1px #ffffff0d;transform:translateY(-2px)}#card-element[_ngcontent-%COMP%]{width:100%;height:100%;color:var(--text-primary)!important}.precio-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--accent-light) 0%,transparent 100%);border:1.5px solid rgba(99,102,241,.3);border-radius:1rem;padding:1.5rem;margin-top:1rem;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);box-shadow:0 4px 12px #6366f11a}.precio-info[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem 0;color:var(--text-secondary);font-size:.95rem;font-weight:500;transition:all .2s ease}.precio-info[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:hover{color:var(--text-primary);transform:translate(4px)}.precio-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--accent-secondary);font-weight:700;font-size:1.05rem}.precio-info[_ngcontent-%COMP%]   .divisor[_ngcontent-%COMP%]{height:1px;background:linear-gradient(90deg,transparent,rgba(99,102,241,.3),transparent);margin:1rem 0}.precio-info[_ngcontent-%COMP%]   .item.total[_ngcontent-%COMP%]{border-top:2px solid rgba(99,102,241,.3);padding-top:1rem;font-size:1.1rem;font-weight:700;color:var(--accent-secondary)}.precio-info[_ngcontent-%COMP%]   .item.total[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.35rem}.error-msg[_ngcontent-%COMP%]{padding:1rem 1.25rem;background:linear-gradient(135deg,var(--error-light) 0%,transparent 100%);border:1.5px solid rgba(239,68,68,.4);border-radius:.875rem;color:#fca5a5;font-size:.95rem;text-align:center;font-weight:500;display:flex;align-items:center;gap:.75rem;animation:_ngcontent-%COMP%_slideInDown .4s cubic-bezier(.4,0,.2,1);-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.error-msg[_ngcontent-%COMP%]:before{content:"\\26a0\\fe0f";flex-shrink:0;font-size:1.25rem}.paso-contenido[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.95rem;line-height:1.6;margin:.75rem 0}.paso-contenido[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--accent-secondary);font-weight:700}.resumen-pago[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;animation:_ngcontent-%COMP%_fadeInUp .4s cubic-bezier(.4,0,.2,1)}.resumen-pago[_ngcontent-%COMP%]   .seccion[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3341554d,#3341551a);border:1px solid var(--border-color);border-radius:.875rem;padding:1.5rem;transition:all .3s ease}.resumen-pago[_ngcontent-%COMP%]   .seccion[_ngcontent-%COMP%]:hover{border-color:var(--accent-primary);background:linear-gradient(135deg,#6366f11a,#3341551a);box-shadow:0 4px 12px #6366f126}.spinner[_ngcontent-%COMP%]{width:56px;height:56px;border:4px solid var(--border-color);border-top-color:var(--accent-primary);border-radius:50%;animation:_ngcontent-%COMP%_spin 1.2s linear infinite;margin:0 auto}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.exito-pago[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1.5rem;text-align:center;animation:_ngcontent-%COMP%_fadeInUp .5s cubic-bezier(.4,0,.2,1)}.exito-pago[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;background:linear-gradient(135deg,var(--success) 0%,#10b981 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;font-weight:700}.exito-pago[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-secondary);font-size:.95rem;font-family:Courier New,monospace;letter-spacing:.05em}.icono-exito[_ngcontent-%COMP%]{width:80px;height:80px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--success-light),rgba(16,185,129,.05));border:2px solid rgba(16,185,129,.4);border-radius:50%;color:var(--success);font-size:2.5rem;animation:_ngcontent-%COMP%_scaleIn .5s cubic-bezier(.34,1.56,.64,1)}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}.estado-loading[_ngcontent-%COMP%], .estado-error[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2rem;min-height:400px;text-align:center;padding:2rem}.estado-error[_ngcontent-%COMP%]{color:var(--error)}.estado-error[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:4rem;animation:_ngcontent-%COMP%_bounce 1s cubic-bezier(.36,0,.66,-.56) infinite}.estado-error[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:var(--error);font-weight:700}.estado-error[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-tertiary)}.btn-volver-error[_ngcontent-%COMP%]{padding:.875rem 2rem;background:linear-gradient(135deg,var(--accent-primary) 0%,var(--accent-secondary) 100%);color:#fff;border:none;border-radius:.875rem;font-weight:700;font-size:.95rem;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);text-transform:uppercase;letter-spacing:.05em;box-shadow:0 4px 12px #6366f14d;margin-top:1rem}.btn-volver-error[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,var(--accent-secondary) 0%,#a5b4fc 100%);transform:translateY(-3px);box-shadow:0 6px 20px #6366f173}.pago-footer[_ngcontent-%COMP%]{display:flex;gap:1.25rem;padding-top:2rem;border-top:1px solid var(--border-color);margin-top:2rem}.btn-secundario[_ngcontent-%COMP%], .btn-primario[_ngcontent-%COMP%]{flex:1;padding:1rem 1.5rem;border:none;border-radius:.875rem;font-weight:700;font-size:.95rem;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);text-transform:uppercase;letter-spacing:.05em;display:flex;align-items:center;justify-content:center;gap:.5rem;position:relative;overflow:hidden}.btn-secundario[_ngcontent-%COMP%]{background:#33415566;color:var(--text-secondary);border:1.5px solid var(--border-light)}.btn-secundario[_ngcontent-%COMP%]:hover:not(:disabled){background:#6366f126;color:var(--text-primary);border-color:var(--accent-primary);transform:translateY(-2px);box-shadow:0 6px 20px #6366f133}.btn-primario[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--accent-primary) 0%,var(--accent-secondary) 100%);color:#fff;box-shadow:0 6px 20px #6366f159}.btn-primario[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,var(--accent-secondary) 0%,#a5b4fc 100%);transform:translateY(-3px);box-shadow:0 8px 30px #6366f180}.btn-primario[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:#fff3;transition:left .3s ease}.btn-primario[_ngcontent-%COMP%]:hover:before{left:100%}.btn-secundario[_ngcontent-%COMP%]:disabled, .btn-primario[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important}.btn-reintentar[_ngcontent-%COMP%]{padding:.875rem 1.5rem;background:linear-gradient(135deg,var(--accent-primary) 0%,var(--accent-secondary) 100%);color:#fff;border:none;border-radius:.875rem;font-weight:700;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);margin-top:1.5rem;text-transform:uppercase;letter-spacing:.05em;box-shadow:0 4px 12px #6366f14d}.btn-reintentar[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,var(--accent-secondary) 0%,#a5b4fc 100%);transform:translateY(-2px);box-shadow:0 6px 20px #6366f173}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideInDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}@media (max-width: 768px){.pago-content[_ngcontent-%COMP%]{padding:1.5rem}.pago-main[_ngcontent-%COMP%]{padding:1.75rem;gap:1.75rem}.pasos-container[_ngcontent-%COMP%]{padding:1.5rem;gap:.5rem}.paso[_ngcontent-%COMP%]   .numero[_ngcontent-%COMP%]{width:42px;height:42px;font-size:1rem}.paso[_ngcontent-%COMP%]   .etiqueta[_ngcontent-%COMP%]{font-size:.75rem}.linea[_ngcontent-%COMP%]{flex:.3}.pago-footer[_ngcontent-%COMP%]{gap:1rem}.btn-secundario[_ngcontent-%COMP%], .btn-primario[_ngcontent-%COMP%]{padding:.875rem 1rem;font-size:.85rem}.pago-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}}@media (max-width: 480px){.container-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.pago-header[_ngcontent-%COMP%]{padding:1rem}.pago-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.25rem}.pasos-container[_ngcontent-%COMP%]{display:none}.pago-main[_ngcontent-%COMP%]{padding:1.5rem;border-radius:1rem}.paso-contenido[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.35rem}.formulario-pago[_ngcontent-%COMP%]{gap:1.25rem}.input-wrapper[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.pago-footer[_ngcontent-%COMP%]{flex-direction:column;gap:.75rem}.btn-secundario[_ngcontent-%COMP%], .btn-primario[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem}.precio-info[_ngcontent-%COMP%]{padding:1.25rem}.contenido-pago[_ngcontent-%COMP%]{min-height:auto}}']})};export{de as ProcesoPagoPage};
