import{a as E}from"./chunk-BOOOHMUF.js";import{a as y}from"./chunk-5ZZMW4NE.js";import{a as S}from"./chunk-V6EGWKIV.js";import{a as w}from"./chunk-YEGIKRE6.js";import"./chunk-XBRAPING.js";import{e as P,f as M,j as O}from"./chunk-XCTHI3QZ.js";import{K as c,La as h,Pa as p,U as d,Wa as s,Xa as n,Ya as e,Za as x,ac as _,eb as v,f as b,ga as f,gb as g,gc as C,pb as i,qb as u,rb as m,wa as r}from"./chunk-VJI5GMUY.js";import"./chunk-FDERIQAA.js";function j(o,t){o&1&&(n(0,"li"),i(1,"No tienes clientes asignados a\xFAn."),e())}function N(o,t){o&1&&(n(0,"li"),i(1,"Tienes "),n(2,"strong"),i(3,"1 cliente"),e(),i(4," activo."),e())}function A(o,t){if(o&1&&(n(0,"li"),i(1,"Tienes "),n(2,"strong"),i(3),e(),i(4," activos."),e()),o&2){let a=g(2);r(3),m("",a.clientesActivos," clientes")}}function L(o,t){if(o&1&&(n(0,"span",17),i(1),e()),o&2){let a=g(2);r(),m("",a.mensajesNuevos," nuevos")}}function U(o,t){o&1&&(n(0,"span",30),i(1,"Actualizados"),e())}function z(o,t){o&1&&(n(0,"p",23),i(1,"No tienes mensajes nuevos."),e())}function D(o,t){o&1&&(n(0,"p",31),i(1,"Tienes "),n(2,"strong"),i(3,"1 mensaje"),e(),i(4," sin leer."),e())}function T(o,t){if(o&1&&(n(0,"p",31),i(1,"Tienes "),n(2,"strong"),i(3),e(),i(4," sin leer."),e()),o&2){let a=g(2);r(3),m("",a.mensajesNuevos," mensajes")}}function R(o,t){if(o&1&&(n(0,"section",10)(1,"article",11)(2,"header")(3,"h3"),i(4,"Mis Clientes"),e(),n(5,"span",12),i(6),e()(),n(7,"p",13),i(8,"Gestiona tus clientes y sus rutinas personalizadas"),e(),n(9,"ul",14),p(10,j,2,0,"li",15)(11,N,5,0,"li",15)(12,A,5,1,"li",15),e(),n(13,"button",16),i(14,"Ver detalles"),e()(),n(15,"article",11)(16,"header")(17,"h3"),i(18,"\u2B50 Tu Calificaci\xF3n"),e(),n(19,"span",17),i(20),e()(),n(21,"p",13),i(22,"Tu reputaci\xF3n seg\xFAn tus clientes"),e(),n(23,"div",18)(24,"div",19)(25,"span",20),i(26),e(),n(27,"span",21),i(28),e(),n(29,"span",22),i(30,"de 5 estrellas"),e()()(),n(31,"p",23),i(32,"Basado en las rese\xF1as de tus clientes"),e(),n(33,"button",24),i(34,"Ver rese\xF1as"),e()(),n(35,"article",11)(36,"header")(37,"h3"),i(38,"\u{1F4AC} Mensajes"),e(),p(39,L,2,1,"span",25)(40,U,2,0,"span",26),e(),n(41,"p",13),i(42,"Comun\xEDcate con tus clientes"),e(),p(43,z,2,0,"p",27)(44,D,5,0,"p",28)(45,T,5,1,"p",28),n(46,"button",29),i(47,"Ver mensajes"),e()()()),o&2){let a=g();r(6),u(a.clientesActivos),r(4),s("ngIf",a.clientesActivos===0),r(),s("ngIf",a.clientesActivos===1),r(),s("ngIf",a.clientesActivos>1),r(8),m("",a.rating,"/5"),r(6),u(a.ratingStars),r(2),u(a.rating),r(11),s("ngIf",a.mensajesNuevos>0),r(),s("ngIf",a.mensajesNuevos===0),r(3),s("ngIf",a.mensajesNuevos===0),r(),s("ngIf",a.mensajesNuevos===1),r(),s("ngIf",a.mensajesNuevos>1)}}function F(o,t){o&1&&(n(0,"section",10),x(1,"div",32)(2,"div",32)(3,"div",32),e())}var I=class o{clienteEntrenadorSvc=d(y);mensajesSvc=d(E);resenasSvc=d(S);router=d(P);destroy$=new b;menuOpen=!1;collapsed=!1;showLogoutModal=f(!1);nombre="Entrenador";inicial="E";fotoUrl="";idUsuario=0;clientesActivos=0;rating="0.0";ratingStars="\u2B50\u2606\u2606\u2606\u2606";mensajesNuevos=0;totalResenas=0;loading=f(!0);ngOnInit(){console.log("\u{1F7E2} [INIT] PaginaPrincipalEntrenador inicializado"),this.cargarDatosUsuario(),this.cargarDatos(),this.suscribirMensajesNoLeidos()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}cargarDatosUsuario(){try{let t=localStorage.getItem("usuario");if(t){let a=JSON.parse(t);this.idUsuario=a.id||a.id_usuario||0,this.nombre=a.nombre||"Entrenador",this.inicial=(a.nombre?.charAt(0)||"E").toUpperCase(),this.fotoUrl=a.foto_url||a.fotoUrl||"",console.log("\u2705 [Usuario] Cargado:",this.nombre,"ID:",this.idUsuario)}else console.warn("\u26A0\uFE0F [Usuario] No encontrado en localStorage")}catch(t){console.error("\u274C [Error] Al cargar usuario:",t),this.nombre="Entrenador",this.inicial="E"}}cargarDatos(){this.loading.set(!0),this.cargarClientesActivos(),this.cargarCalificacion(),this.cargarMensajesNuevos()}cargarClientesActivos(){console.log("\u{1F7E6} [CARGA] Obteniendo clientes activos..."),this.clienteEntrenadorSvc.misClientes().pipe(c(this.destroy$)).subscribe({next:t=>{this.clientesActivos=t?.length||0,console.log("\u2705 [Clientes] Cantidad:",this.clientesActivos)},error:t=>{console.error("\u274C [Error] Al cargar clientes:",t),this.clientesActivos=0}})}cargarCalificacion(){if(console.log("\u{1F7E6} [CARGA] Obteniendo calificaci\xF3n del entrenador..."),!this.idUsuario){console.warn("\u26A0\uFE0F ID de usuario no disponible");return}this.resenasSvc.obtenerEstadisticasEntrenador(this.idUsuario).pipe(c(this.destroy$)).subscribe({next:t=>{this.rating=(t.promedio_calificacion||0).toFixed(1),this.totalResenas=t.total_resenas||0,this.ratingStars=this.generarEstrellas(parseFloat(this.rating)),console.log("\u2705 [Calificaci\xF3n] Rating:",this.rating,"Rese\xF1as:",this.totalResenas)},error:t=>{console.error("\u274C [Error] Al cargar calificaci\xF3n:",t),this.rating="0.0",this.ratingStars="\u2B50\u2606\u2606\u2606\u2606",this.totalResenas=0}})}cargarMensajesNuevos(){if(console.log("\u{1F7E6} [CARGA] Obteniendo mensajes nuevos..."),!this.idUsuario){console.warn("\u26A0\uFE0F ID de usuario no disponible"),this.loading.set(!1);return}this.mensajesSvc.contarMensajesNoLeidos(this.idUsuario).pipe(c(this.destroy$)).subscribe({next:t=>{this.mensajesNuevos=t.no_leidos||0,console.log("\u2705 [Mensajes] Nuevos:",this.mensajesNuevos),this.loading.set(!1)},error:t=>{console.error("\u274C [Error] Al cargar mensajes:",t),this.mensajesNuevos=0,this.loading.set(!1)}})}suscribirMensajesNoLeidos(){this.mensajesSvc.mensajesNoLeidos$.pipe(c(this.destroy$)).subscribe({next:t=>{this.mensajesNuevos=t,console.log("\u{1F4EC} [Mensajes] Actualizado a:",t)},error:t=>console.error("\u274C Error en suscripci\xF3n mensajes:",t)})}generarEstrellas(t){let a=Math.round(t),l=5-a;return"\u2B50".repeat(Math.min(a,5))+"\u2606".repeat(Math.max(l,0))}openLogoutModal(){console.log("\u{1F7E6} [Modal] Abriendo modal de logout..."),this.showLogoutModal.set(!0)}confirmLogout(){console.log("\u{1F7E6} [LOGOUT] Cerrando sesi\xF3n..."),localStorage.removeItem("token"),localStorage.removeItem("gym_token"),localStorage.removeItem("usuario"),localStorage.removeItem("gym_user"),this.showLogoutModal.set(!1),this.router.navigate(["/bienvenida"],{replaceUrl:!0})}cancelLogout(){console.log("\u{1F7E6} [Modal] Cerrando modal de logout..."),this.showLogoutModal.set(!1)}static \u0275fac=function(a){return new(a||o)};static \u0275cmp=h({type:o,selectors:[["app-pagina-principal-entrenador"]],decls:18,vars:3,consts:[[1,"page-wrap"],[1,"hero"],[1,"hero-overlay"],[1,"container","hero-inner"],[1,"sub"],[1,"hero-actions"],["routerLink","/entrenador/mis-clientes",1,"btn","btn-accent","btn-lg","btn-glow"],["routerLink","/entrenador/resenas",1,"btn","btn-outline-light","btn-lg"],["class","container grid",4,"ngIf"],[3,"confirmed","cancelled","isOpen"],[1,"container","grid"],[1,"card"],[1,"badge"],[1,"card-description"],[1,"list"],[4,"ngIf"],["routerLink","/entrenador/mis-clientes",1,"btn","btn-primary","btn-block"],[1,"badge","badge-info"],[1,"stat"],[1,"rating-display"],[1,"rating-stars"],[1,"rating-number"],[1,"rating-label"],[1,"muted"],["routerLink","/entrenador/resenas",1,"btn","btn-primary","btn-block"],["class","badge badge-info",4,"ngIf"],["class","badge badge-muted",4,"ngIf"],["class","muted",4,"ngIf"],["class","highlight",4,"ngIf"],["routerLink","/mensajes",1,"btn","btn-primary","btn-block"],[1,"badge","badge-muted"],[1,"highlight"],[1,"card","loading-card"]],template:function(a,l){a&1&&(n(0,"div",0)(1,"section",1),x(2,"div",2),n(3,"div",3)(4,"h1"),i(5,"Impulsa a tus clientes al siguiente nivel"),e(),n(6,"p",4),i(7,"Gestiona rutinas, sigue su progreso y mant\xE9n la motivaci\xF3n constante."),e(),n(8,"div",5)(9,"a",6)(10,"span"),i(11," Gestionar clientes"),e()(),n(12,"a",7)(13,"span"),i(14,"\u2B50 Ver rese\xF1as"),e()()()()(),p(15,R,48,12,"section",8)(16,F,4,0,"section",8),e(),n(17,"app-confirm-logout-modal",9),v("confirmed",function(){return l.confirmLogout()})("cancelled",function(){return l.cancelLogout()}),e()),a&2&&(r(15),s("ngIf",!l.loading()),r(),s("ngIf",l.loading()),r(),s("isOpen",l.showLogoutModal()))},dependencies:[C,_,O,M,w],styles:['[_ngcontent-%COMP%]:root{--primary: #3b82f6;--primary-700: #2563eb;--secondary: #60a5fa;--success: #10b981;--info: #74c0fc;--warning: #ffa500;--danger: #ff6b6b;--bg: #0d0f12;--panel: #12151a;--panel-2: #171b21;--text: #e7e9ee;--muted: #9aa3af;--border: #252a33;--shadow: 0 8px 28px rgba(0, 0, 0, .45);--radius: 16px;--container-pad: 24px;--container-max: 1180px}[_nghost-%COMP%]{display:block;min-height:100dvh;color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,"Apple Color Emoji","Segoe UI Emoji",sans-serif;background:radial-gradient(1200px 600px at 70% -10%,rgba(59,130,246,.08),transparent 60%),var(--bg)}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.page-wrap[_ngcontent-%COMP%]{min-height:100dvh}.hero[_ngcontent-%COMP%]{position:relative;isolation:isolate;min-height:68vh;padding:84px 0 40px;text-align:center;overflow:hidden}.hero[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;z-index:-2;background:url(/assets/img/fitman-logo.png) center / cover no-repeat;transform:scale(1.04);pointer-events:none}.hero-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:-1;background:radial-gradient(60% 40% at 50% 0%,rgba(59,130,246,.25),transparent 60%),linear-gradient(180deg,#000000a6,#000000bf);pointer-events:none}.hero-inner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:14px;position:relative;z-index:1}.hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:clamp(28px,4vw,56px);margin:8px 0 0;line-height:1.1;color:var(--text);text-shadow:0 4px 20px rgba(59,130,246,.5),0 2px 8px rgba(0,0,0,.8)}.sub[_ngcontent-%COMP%]{color:var(--muted);margin:4px 0 10px;font-size:clamp(14px,2vw,18px);text-shadow:0 2px 8px rgba(0,0,0,.8)}.hero-actions[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;margin-top:6px}.hero[_ngcontent-%COMP%]{margin-bottom:28px}.container[_ngcontent-%COMP%]{width:min(var(--container-max),100% - var(--container-pad) * 2);margin-inline:auto}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(12,minmax(0,1fr));gap:20px;padding-bottom:40px}.card[_ngcontent-%COMP%]{grid-column:span 4 / span 4;background:linear-gradient(180deg,#12151af2,#0d0f12f2);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);padding:20px;overflow:hidden;transition:all .3s ease;position:relative}.card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--primary),var(--secondary));opacity:0;transition:opacity .3s}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 12px 40px #3b82f633;border-color:#3b82f666}.card[_ngcontent-%COMP%]:hover:before{opacity:1}.card[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}.card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.15rem;color:var(--text);font-weight:700}.card-description[_ngcontent-%COMP%]{color:var(--muted);font-size:.9rem;margin:8px 0 16px;line-height:1.5}.badge[_ngcontent-%COMP%]{font-size:.75rem;padding:4px 10px;border-radius:999px;background:#3b82f626;color:var(--primary);border:1px solid rgba(59,130,246,.3);font-weight:600}.badge-info[_ngcontent-%COMP%]{background:#74c0fc26;color:var(--info);border-color:#74c0fc4d}.badge-muted[_ngcontent-%COMP%]{background:#9aa3af26;color:var(--muted);border-color:#9aa3af4d}.list[_ngcontent-%COMP%]{list-style:none;margin:10px 0 16px;padding:0;color:#d3d8e3}.list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px 0;border-bottom:1px dashed #1f2530;font-size:.95rem}.list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:0}.muted[_ngcontent-%COMP%]{color:var(--muted);font-size:.9rem;margin:10px 0}.highlight[_ngcontent-%COMP%]{color:var(--primary);font-size:.95rem;margin:10px 0}.stat[_ngcontent-%COMP%]{margin:16px 0}.rating-display[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;padding:16px;background:#3b82f60d;border-radius:12px}.rating-stars[_ngcontent-%COMP%]{font-size:2rem;line-height:1}.rating-label[_ngcontent-%COMP%]{font-size:.9rem;color:var(--muted)}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 16px;border-radius:12px;text-decoration:none;border:1px solid var(--border);color:var(--text);transition:all .2s ease;font-weight:600;cursor:pointer;font-family:inherit}.btn[_ngcontent-%COMP%]:active{transform:translateY(1px)}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary),var(--primary-700));border-color:var(--primary);color:#fff;box-shadow:0 4px 12px #3b82f64d}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,var(--primary-700),#1d4ed8);box-shadow:0 6px 16px #3b82f666;transform:translateY(-2px)}.btn-block[_ngcontent-%COMP%]{display:block;width:100%;margin-top:8px}.btn-lg[_ngcontent-%COMP%]{padding:14px 20px;font-size:1.02rem;border-radius:14px;font-weight:700;letter-spacing:.2px}.btn-accent[_ngcontent-%COMP%]{color:#fff;border:0;background-image:linear-gradient(135deg,#3b82f6,#2563eb,#1d4ed8);box-shadow:0 10px 24px #3b82f659,0 2px #00000040 inset;transform:translateY(0)}.btn-accent[_ngcontent-%COMP%]:hover{filter:brightness(1.1);box-shadow:0 14px 30px #3b82f673,0 2px #00000040 inset}.btn-accent[_ngcontent-%COMP%]:active{transform:translateY(1px)}.btn-outline-light[_ngcontent-%COMP%]{color:#e7e9ee;background:#ffffff0a;border:1px solid rgba(231,233,238,.28);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.btn-outline-light[_ngcontent-%COMP%]:hover{background:#ffffff14;border-color:#e7e9ee73}.btn-glow[_ngcontent-%COMP%]{position:relative}.btn-glow[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:-2px;border-radius:16px;background:radial-gradient(40% 60% at 50% 10%,rgba(59,130,246,.4),transparent 60%);filter:blur(12px);z-index:-1;opacity:.65;transition:opacity .2s ease}.btn-glow[_ngcontent-%COMP%]:hover:after{opacity:.9}@media (max-width: 768px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(6,minmax(0,1fr));gap:16px}.card[_ngcontent-%COMP%]{grid-column:span 6 / span 6}.hero[_ngcontent-%COMP%]{min-height:56vh;padding:68px 0 28px;margin-bottom:22px}.hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:clamp(24px,6vw,40px)}.hero-actions[_ngcontent-%COMP%]{flex-direction:column;width:100%;max-width:300px}.btn-lg[_ngcontent-%COMP%]{width:100%}}@media (max-width: 460px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,minmax(0,1fr));gap:14px}.card[_ngcontent-%COMP%]{grid-column:span 4 / span 4}.hero-actions[_ngcontent-%COMP%]{gap:10px}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInUp .4s ease-out}.card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}@media (prefers-reduced-motion: reduce){.btn[_ngcontent-%COMP%], .btn-accent[_ngcontent-%COMP%], .btn-outline-light[_ngcontent-%COMP%], .btn-glow[_ngcontent-%COMP%]:after, .card[_ngcontent-%COMP%]{transition:none;animation:none}}.loading-card[_ngcontent-%COMP%]{background:linear-gradient(90deg,#12151a80 25%,#1e253080,#12151a80 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_loading 1.5s infinite}@keyframes _ngcontent-%COMP%_loading{0%{background-position:200% 0}to{background-position:-200% 0}}'],changeDetection:0})};export{I as PaginaPrincipalEntrenador};
