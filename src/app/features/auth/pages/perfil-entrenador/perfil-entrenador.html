<section class="wrap">
  <!-- Topbar Premium -->
  <header class="topbar container">
    <div class="title">
      <h1 class="upper">{{ nombre }}</h1>
      <span class="chip">
        <span class="dot"></span>
        Entrenador de gimnasio
      </span>
    </div>

    <div class="avatar-stack">
      <div class="avatar">
        <img *ngIf="fotoUrl; else inic" [src]="fotoUrl" alt="Foto" />
        <ng-template #inic>
          <div class="letters">{{ inicial }}</div>
        </ng-template>
      </div>

      <div class="avatar-actions">
        <input
          id="avatarFile"
          type="file"
          class="hidden-file"
          accept="image/*"
          (change)="changeAvatar($event)"
        />
        <label for="avatarFile" class="btn btn-ghost btn-sm">
          <span class="material-icons-outlined">photo_camera</span> Cambiar
        </label>
        <button class="btn btn-danger-ghost btn-sm" (click)="removeAvatar()">
          <span class="material-icons-outlined">close</span> Quitar
        </button>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- SECCIÓN 1: INFORMACIÓN BÁSICA -->
    <article class="card card-hero">
      <header class="card-head">
        <h3><span class="material-icons-outlined">assignment</span> Información Profesional</h3>
      </header>

      <div class="form-grid">
        <div class="form-group span-full">
          <label class="label"><span class="material-icons-outlined">description</span> Resumen Profesional</label>
          <textarea
            class="input textarea"
            rows="4"
            [(ngModel)]="data.resumen"
            placeholder="Tu presentación profesional..."
          ></textarea>
        </div>

        <div class="form-group">
          <label class="label"><span class="material-icons-outlined">fitness_center</span> Especialidad Principal</label>
          <input
            type="text"
            class="input"
            [(ngModel)]="data.especialidad"
            placeholder="Ej: Musculación, Cardio..."
          />
        </div>

        <div class="form-group">
          <label class="label"><span class="material-icons-outlined">calendar_month</span> Años de Experiencia</label>
          <input
            type="number"
            class="input"
            [(ngModel)]="data.experiencia"
            placeholder="0"
          />
        </div>

        <div class="form-group span-full">
          <label class="label"><span class="material-icons-outlined">verified</span> Certificaciones Principales</label>
          <textarea
            class="input textarea"
            rows="3"
            [(ngModel)]="data.certificaciones"
            placeholder="Ej: ACE, ISSA, NASM..."
          ></textarea>
        </div>
      </div>
    </article>

    <!-- SECCIÓN 2: UBICACIÓN Y TARIFA -->
    <div class="grid-single">
      <article class="card card-secondary">
        <header class="card-head-compact">
          <h3><span class="material-icons-outlined">location_on</span> Ubicación y Modalidades</h3>
        </header>

        <div class="form-grid">
          <div class="form-group span-full">
            <label class="label"><span class="material-icons-outlined">location_city</span> Ciudad</label>
            <select class="input" [(ngModel)]="data.ciudad">
              <option value="">Selecciona tu ciudad...</option>
              <option *ngFor="let c of ciudadesDisponibles" [value]="c">{{ c }}</option>
            </select>
          </div>

          <div class="form-group span-full">
            <label class="label"><span class="material-icons-outlined">sports_gymnastics</span> Modalidades de Entrenamiento</label>
            <div class="modalidades-grid">
              <button
                *ngFor="let mod of modalidadesDisponibles"
                type="button"
                class="btn-toggle"
                [class.active]="isModalidadSeleccionada(mod)"
                (click)="toggleModalidad(mod)"
              >
                <span class="material-icons-outlined">
                  {{ mod === 'Online' ? 'computer' : 'fitness_center' }}
                </span>
                {{ mod }}
              </button>
            </div>
          </div>
        </div>
      </article>

      <article class="card card-price">
        <header class="card-head-compact">
          <h3><span class="material-icons-outlined">attach_money</span> Mi Tarifa</h3>
        </header>

        <div class="form-grid">
          <div class="form-group span-full">
            <label class="label">Precio por Sesión</label>
            <div class="price-input">
              <span class="currency">$</span>
              <input
                type="number"
                class="input"
                [(ngModel)]="data.precio"
                placeholder="Ingresa tu tarifa"
              />
              <span class="price-period">/ sesión</span>
            </div>
          </div>
        </div>

        <div class="price-display" *ngIf="data.precio">
          <div class="price-content">
            <span class="price-label">Tarifa</span>
            <span class="price-value">${{ data.precio }}</span>
          </div>
        </div>
      </article>
    </div>

    <!-- SECCIÓN 3: ESPECIALIDADES MÚLTIPLES -->
    <article class="card card-hero">
      <header class="card-head">
        <h3><span class="material-icons-outlined">workspace_premium</span> Especialidades Adicionales</h3>
      </header>

      <div class="especialidades-container">
        <div class="add-especialidad">
          <input
            type="text"
            class="input"
            [(ngModel)]="especialidadTemporal"
            placeholder="Ej: Yoga, Pilates, TRX..."
            (keyup.enter)="agregarEspecialidad()"
          />
          <button
            type="button"
            class="btn btn-accent btn-sm"
            (click)="agregarEspecialidad()"
          >
            <span class="material-icons-outlined">add</span> Agregar
          </button>
        </div>

        <div class="especialidades-list" *ngIf="data.especialidades?.length">
          <span
            *ngFor="let esp of data.especialidades; let i = index"
            class="badge"
          >
            {{ esp }}
            <button
              type="button"
              class="badge-close"
              (click)="eliminarEspecialidad(i)"
            >
              <span class="material-icons-outlined">close</span>
            </button>
          </span>
        </div>
      </div>
    </article>
  </main>

  <footer class="actions container">
    <button class="btn btn-ghost" (click)="cancel()">
      <span class="material-icons-outlined">cancel</span> Cancelar
    </button>
    <button class="btn btn-accent" [disabled]="saving" (click)="save()">
      <span class="material-icons-outlined">
        {{ saving ? 'hourglass_top' : 'check' }}
      </span>
      {{ saving ? 'Guardando...' : 'Guardar cambios' }}
    </button>
  </footer>
</section>
