<section class="wrap">
  <!-- Topbar Premium -->
  <header class="topbar container">
    <div class="title">
      <h1 class="upper">{{ nombre }}</h1>
      <span class="chip">
        <span class="dot"></span>
        Entrenador de gimnasio
      </span>
    </div>

    <div class="avatar-stack">
      <div class="avatar">
        <img *ngIf="fotoUrl; else inic" [src]="fotoUrl" alt="Foto" />
        <ng-template #inic>
          <div class="letters">{{ inicial }}</div>
        </ng-template>
      </div>

      <div class="avatar-actions">
        <input
          id="avatarFile"
          type="file"
          class="hidden-file"
          accept="image/*"
          (change)="changeAvatar($event)"
        />
        <label for="avatarFile" class="btn btn-ghost btn-sm">ğŸ“· Cambiar</label>
        <button class="btn btn-danger-ghost btn-sm" (click)="removeAvatar()">
          âœ• Quitar
        </button>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- SECCIÃ“N 1: INFORMACIÃ“N BÃSICA -->
    <article class="card card-hero">
      <header class="card-head">
        <h3>ğŸ“‹ InformaciÃ³n Profesional</h3>
      </header>

      <div class="form-grid">
        <!-- Resumen -->
        <div class="form-group span-full">
          <label class="label">âœ¨ Resumen Profesional</label>
          <textarea
            class="input textarea"
            rows="4"
            [(ngModel)]="data.resumen"
            placeholder="Tu presentaciÃ³n profesional..."
          ></textarea>
        </div>

        <!-- Row: Especialidad & Experiencia -->
        <div class="form-group">
          <label class="label">ğŸ’ª Especialidad Principal</label>
          <input
            type="text"
            class="input"
            [(ngModel)]="data.especialidad"
            placeholder="Ej: MusculaciÃ³n, Cardio..."
          />
        </div>

        <div class="form-group">
          <label class="label">ğŸ“… AÃ±os de Experiencia</label>
          <input
            type="number"
            class="input"
            [(ngModel)]="data.experiencia"
            placeholder="0"
          />
        </div>

        <!-- Certificaciones -->
        <div class="form-group span-full">
          <label class="label">ğŸ† Certificaciones Principales</label>
          <textarea
            class="input textarea"
            rows="3"
            [(ngModel)]="data.certificaciones"
            placeholder="Ej: ACE, ISSA, NASM..."
          ></textarea>
        </div>
      </div>
    </article>

    <!-- SECCIÃ“N 2: UBICACIÃ“N Y TARIFA -->
    <div class="grid-single">
      <!-- Ciudad & Modalidades -->
      <article class="card card-secondary">
        <header class="card-head-compact">
          <h3>ğŸ“ UbicaciÃ³n y Modalidades</h3>
        </header>

        <div class="form-grid">
          <!-- Ciudad -->
          <div class="form-group span-full">
            <label class="label">ğŸ™ï¸ Ciudad</label>
            <select class="input" [(ngModel)]="data.ciudad">
              <option value="">Selecciona tu ciudad...</option>
              <option *ngFor="let c of ciudadesDisponibles" [value]="c">
                {{ c }}
              </option>
            </select>
          </div>

          <!-- Modalidades -->
          <div class="form-group span-full">
            <label class="label">ğŸ¯ Modalidades de Entrenamiento</label>
            <div class="modalidades-grid">
              <button
                *ngFor="let mod of modalidadesDisponibles"
                type="button"
                class="btn-toggle"
                [class.active]="isModalidadSeleccionada(mod)"
                (click)="toggleModalidad(mod)"
              >
                {{ mod === 'Online' ? 'ğŸ’»' : 'ğŸ‹ï¸' }} {{ mod }}
              </button>
            </div>
          </div>
        </div>
      </article>

      <!-- Precio Fijo -->
      <article class="card card-price">
        <header class="card-head-compact">
          <h3>ğŸ’° Mi Tarifa</h3>
        </header>

        <div class="form-grid">
          <div class="form-group span-full">
            <label class="label">Precio por SesiÃ³n</label>
            <div class="price-input">
              <span class="currency">$</span>
              <input
                type="number"
                class="input"
                [(ngModel)]="data.precio"
                placeholder="Ingresa tu tarifa"
              />
              <span class="price-period">/ sesiÃ³n</span>
            </div>
          </div>
        </div>

        <div class="price-display" *ngIf="data.precio">
          <div class="price-content">
            <span class="price-label">Tarifa</span>
            <span class="price-value">${{ data.precio }}</span>
          </div>
        </div>
      </article>
    </div>

    <!-- SECCIÃ“N 3: ESPECIALIDADES MÃšLTIPLES -->
    <article class="card card-hero">
      <header class="card-head">
        <h3>ğŸ“ Especialidades Adicionales</h3>
      </header>

      <div class="especialidades-container">
        <div class="add-especialidad">
          <input
            type="text"
            class="input"
            [(ngModel)]="especialidadTemporal"
            placeholder="Ej: Yoga, Pilates, TRX..."
            (keyup.enter)="agregarEspecialidad()"
          />
          <button
            type="button"
            class="btn btn-accent btn-sm"
            (click)="agregarEspecialidad()"
          >
            â• Agregar
          </button>
        </div>

        <div class="especialidades-list" *ngIf="data.especialidades?.length">
          <span
            *ngFor="let esp of data.especialidades; let i = index"
            class="badge"
          >
            {{ esp }}
            <button
              type="button"
              class="badge-close"
              (click)="eliminarEspecialidad(i)"
            >
              âœ•
            </button>
          </span>
        </div>
      </div>
    </article>

    <!-- SECCIÃ“N 4: FORMACIÃ“N (2 COLUMNAS) -->
    <div class="grid-2">
      <!-- EducaciÃ³n -->
      <article class="card">
        <header class="card-head">
          <h3>ğŸ“ EducaciÃ³n</h3>
          <button class="btn btn-ghost btn-sm" (click)="addEdu()">
            â• Agregar
          </button>
        </header>

        <ng-container *ngIf="data.educacion?.length; else emptyEdu">
          <ul class="list">
            <li
              *ngFor="let e of data.educacion; let i = index"
              class="item"
              [attr.data-index]="i"
            >
              <div class="item-body">
                <input
                  class="input input-sm"
                  placeholder="TÃ­tulo"
                  [(ngModel)]="e.titulo"
                />
                <input
                  class="input input-sm"
                  placeholder="InstituciÃ³n"
                  [(ngModel)]="e.institucion"
                />
                <div class="row">
                  <input
                    class="input input-sm"
                    placeholder="Inicio (YYYY)"
                    [(ngModel)]="e.inicio"
                  />
                  <input
                    class="input input-sm"
                    placeholder="Fin (YYYY)"
                    [(ngModel)]="e.fin"
                  />
                </div>
                <textarea
                  class="input textarea-sm"
                  rows="2"
                  placeholder="DescripciÃ³n"
                  [(ngModel)]="e.descripcion"
                ></textarea>
              </div>

              <div class="item-actions">
                <input
                  class="hidden-file"
                  [id]="'eduFile' + i"
                  type="file"
                  (change)="onPickFileFor('educacion', i, $event)"
                />
                <label class="btn btn-ghost btn-xs" [for]="'eduFile' + i">
                  ğŸ“ Evidencia
                </label>
                <a
                  *ngIf="e.evidenciaUrl"
                  class="link"
                  [href]="e.evidenciaUrl"
                  target="_blank"
                  rel="noopener"
                >
                  ğŸ‘ Ver
                </a>
                <button
                  class="btn btn-danger-ghost btn-xs"
                  (click)="delEdu(i)"
                >
                  âœ•
                </button>
              </div>
            </li>
          </ul>
        </ng-container>
        <ng-template #emptyEdu>
          <p class="empty">ğŸ“š Sin registros de educaciÃ³n</p>
        </ng-template>
      </article>

      <!-- Diplomas -->
      <article class="card">
        <header class="card-head">
          <h3>ğŸ… Diplomas y Certificados</h3>
          <button class="btn btn-ghost btn-sm" (click)="addDiploma()">
            â• Agregar
          </button>
        </header>

        <ng-container *ngIf="data.diplomas?.length; else emptyDip">
          <ul class="list">
            <li
              *ngFor="let d of data.diplomas; let i = index"
              class="item"
              [attr.data-index]="i"
            >
              <div class="item-body">
                <input
                  class="input input-sm"
                  placeholder="TÃ­tulo del certificado"
                  [(ngModel)]="d.titulo"
                />
                <input
                  class="input input-sm"
                  placeholder="InstituciÃ³n"
                  [(ngModel)]="d.institucion"
                />
                <input
                  class="input input-sm"
                  placeholder="Fecha (YYYY-MM)"
                  [(ngModel)]="d.fecha"
                />
              </div>

              <div class="item-actions">
                <input
                  class="hidden-file"
                  [id]="'dipFile' + i"
                  type="file"
                  (change)="onPickFileFor('diplomas', i, $event)"
                />
                <label class="btn btn-ghost btn-xs" [for]="'dipFile' + i">
                  ğŸ“ Evidencia
                </label>
                <a
                  *ngIf="d.evidenciaUrl"
                  class="link"
                  [href]="d.evidenciaUrl"
                  target="_blank"
                  rel="noopener"
                >
                  ğŸ‘ Ver
                </a>
                <button
                  class="btn btn-danger-ghost btn-xs"
                  (click)="delDiploma(i)"
                >
                  âœ•
                </button>
              </div>
            </li>
          </ul>
        </ng-container>
        <ng-template #emptyDip>
          <p class="empty">ğŸ–ï¸ Sin registros de diplomas</p>
        </ng-template>
      </article>
    </div>

    <!-- SECCIÃ“N 5: DESARROLLO (2 COLUMNAS) -->
    <div class="grid-2">
      <!-- Cursos -->
      <article class="card">
        <header class="card-head">
          <h3>ğŸ“š Cursos y Capacitaciones</h3>
          <button class="btn btn-ghost btn-sm" (click)="addCurso()">
            â• Agregar
          </button>
        </header>

        <ng-container *ngIf="data.cursos?.length; else emptyCur">
          <ul class="list">
            <li
              *ngFor="let c of data.cursos; let i = index"
              class="item"
              [attr.data-index]="i"
            >
              <div class="item-body">
                <input
                  class="input input-sm"
                  placeholder="Nombre del curso"
                  [(ngModel)]="c.titulo"
                />
                <input
                  class="input input-sm"
                  placeholder="InstituciÃ³n / Plataforma"
                  [(ngModel)]="c.institucion"
                />
                <input
                  class="input input-sm"
                  placeholder="Fecha (YYYY-MM)"
                  [(ngModel)]="c.fecha"
                />
              </div>

              <div class="item-actions">
                <input
                  class="hidden-file"
                  [id]="'curFile' + i"
                  type="file"
                  (change)="onPickFileFor('cursos', i, $event)"
                />
                <label class="btn btn-ghost btn-xs" [for]="'curFile' + i">
                  ğŸ“ Evidencia
                </label>
                <a
                  *ngIf="c.evidenciaUrl"
                  class="link"
                  [href]="c.evidenciaUrl"
                  target="_blank"
                  rel="noopener"
                >
                  ğŸ‘ Ver
                </a>
                <button
                  class="btn btn-danger-ghost btn-xs"
                  (click)="delCurso(i)"
                >
                  âœ•
                </button>
              </div>
            </li>
          </ul>
        </ng-container>
        <ng-template #emptyCur>
          <p class="empty">ğŸ“– Sin registros de cursos</p>
        </ng-template>
      </article>

      <!-- Logros -->
      <article class="card">
        <header class="card-head">
          <h3>â­ Logros y Reconocimientos</h3>
          <button class="btn btn-ghost btn-sm" (click)="addLogro()">
            â• Agregar
          </button>
        </header>

        <ng-container *ngIf="data.logros?.length; else emptyLog">
          <ul class="list">
            <li
              *ngFor="let l of data.logros; let i = index"
              class="item"
              [attr.data-index]="i"
            >
              <div class="item-body">
                <input
                  class="input input-sm"
                  placeholder="TÃ­tulo del logro"
                  [(ngModel)]="l.titulo"
                />
                <input
                  class="input input-sm"
                  placeholder="AÃ±o (YYYY)"
                  [(ngModel)]="l.anio"
                />
                <textarea
                  class="input textarea-sm"
                  rows="2"
                  placeholder="DescripciÃ³n"
                  [(ngModel)]="l.descripcion"
                ></textarea>
              </div>

              <div class="item-actions">
                <input
                  class="hidden-file"
                  [id]="'logFile' + i"
                  type="file"
                  (change)="onPickFileFor('logros', i, $event)"
                />
                <label class="btn btn-ghost btn-xs" [for]="'logFile' + i">
                  ğŸ“ Evidencia
                </label>
                <a
                  *ngIf="l.evidenciaUrl"
                  class="link"
                  [href]="l.evidenciaUrl"
                  target="_blank"
                  rel="noopener"
                >
                  ğŸ‘ Ver
                </a>
                <button
                  class="btn btn-danger-ghost btn-xs"
                  (click)="delLogro(i)"
                >
                  âœ•
                </button>
              </div>
            </li>
          </ul>
        </ng-container>
        <ng-template #emptyLog>
          <p class="empty">ğŸ† Sin registros de logros</p>
        </ng-template>
      </article>
    </div>
  </main>

  <!-- Barra de acciones pegajosa -->
  <footer class="actions container">
    <button class="btn btn-ghost" (click)="cancel()"> Cancelar</button>
    <button class="btn btn-accent" [disabled]="saving" (click)="save()">
      {{ saving ? 'â³ Guardando...' : 'âœ“ Guardar cambios' }}
    </button>
  </footer>
</section>